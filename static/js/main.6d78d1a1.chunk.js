(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{24:function(t,e,n){t.exports={formStyle:"Form_formStyle__1B3WC",formStyleTitle:"Form_formStyleTitle__2ms-M",formStyleFormInput:"Form_formStyleFormInput__1fSr_",formStyleFormButton:"Form_formStyleFormButton__1dh4w"}},29:function(t,e,n){t.exports={filter:"Filter_filter__3vjC_",filterInput:"Filter_filterInput__W5it4",filterTitle:"Filter_filterTitle__2-bEQ"}},35:function(t,e,n){t.exports={ListContactItem:"Listcontact_ListContactItem__3Be3W",buttonDeleteContact:"Listcontact_buttonDeleteContact__tMe7E"}},47:function(t,e,n){t.exports={homePage:"homePage_homePage__2IqrP"}},77:function(t,e,n){},8:function(t,e,n){t.exports={header:"navigation_header__3vAiE",listNavigation:"navigation_listNavigation__Bzbht"}},80:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n(1),a=n.n(r),o=n(25),s=n.n(o),u=n(17),i=n(18),l=n(20),b=n(19),j=n(16),d=n(6),h=n(5),O=n(14),f=n.n(O),m=n(2),g={registerRequest:Object(m.b)("auth/registerRequest"),registerSuccess:Object(m.b)("auth/registerSuccess"),registerError:Object(m.b)("auth/registerError"),logInRequest:Object(m.b)("auth/logInRequest"),logInSuccess:Object(m.b)("auth/logInSuccess"),logInError:Object(m.b)("auth/logInError"),logOutRequest:Object(m.b)("auth/logOutRequest"),logOutSuccess:Object(m.b)("auth/logOutSuccess"),logOutError:Object(m.b)("auth/logOutError"),getCurrentUserRequest:Object(m.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(m.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(m.b)("auth/getCurrentUserError")};f.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var p={set:function(t){f.a.defaults.headers.common.Authorization="Bearer ".concat(t)},unset:function(){f.a.defaults.headers.common.Authorization=""}},C={register:function(t){return function(e){e(g.registerRequest()),f.a.post("/users/signup",t).then((function(t){p.set(t.data.token),e(g.registerSuccess(t.data))})).catch((function(t){return g.registerError(t.payload)}))}},logIn:function(t){return function(e){e(g.logInRequest()),f.a.post("/users/login",t).then((function(t){console.log("LogIn:",t),p.set(t.data.token),e(g.logInSuccess(t.data))})).catch((function(t){return g.logInError(t.payload)}))}},logOut:function(){return function(t){t(g.logOutRequest()),f.a.post("/users/logout").then((function(){p.unset(),t(g.logOutSuccess())})).catch((function(e){return t(g.logOutError(e.payload))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(p.set(n),t(g.getCurrentUserRequest()),f.a.get("/users/current").then((function(e){return t(g.getCurrentUserSuccess(e.data))})).catch((function(e){return t(g.getCurrentUserError(e.payload))})))}},token:p},x=n(47),v=n.n(x),S=function(){return Object(c.jsxs)("ul",{className:v.a.homePage,children:[Object(c.jsx)("li",{children:Object(c.jsx)("h2",{children:"Use our service to store your phone contacts"})}),Object(c.jsx)("li",{children:Object(c.jsx)("span",{children:"To Register click: Registers"})}),Object(c.jsx)("li",{children:Object(c.jsx)("span",{children:"To Log in click: Log in"})})]})},y=n(13),I=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={name:"",email:"",password:""},t.handelRegistrationName=function(e){e.preventDefault(),t.setState({name:e.target.value})},t.handelRegistrationEmail=function(e){e.preventDefault(),t.setState({email:e.target.value})},t.handelRegistrationPassword=function(e){e.preventDefault(),t.setState({password:e.target.value})},t.RegisterSubmit=function(e){e.preventDefault(),t.props.onRegister(Object(y.a)({},t.state)),t.setState({name:"",email:"",password:""})},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=t.email,r=t.password;return Object(c.jsxs)("form",{onSubmit:this.RegisterSubmit,children:[Object(c.jsx)("h1",{children:"Form registration"}),Object(c.jsx)("h2",{children:"Name"}),Object(c.jsx)("input",{type:"text",name:"user",value:e,onChange:this.handelRegistrationName,placeholder:"user name"}),Object(c.jsx)("h2",{children:"E-mail"}),Object(c.jsx)("input",{type:"email",value:n,name:"user",onChange:this.handelRegistrationEmail,placeholder:"user email"}),Object(c.jsx)("h2",{children:"Password"}),Object(c.jsx)("input",{type:"password",value:r,name:"user",onChange:this.handelRegistrationPassword,placeholder:"user password"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{type:"submit",className:"",children:"To Register"})]})}}]),n}(r.Component),N=Object(h.b)(null,{onRegister:C.register})(I),_=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={email:"",password:""},t.handelEmailLogIn=function(e){e.preventDefault(),t.setState({email:e.target.value})},t.handelpasswordLogIn=function(e){e.preventDefault(),t.setState({password:e.target.value})},t.logInSubmit=function(e){e.preventDefault(),t.props.onLogIn(Object(y.a)({},t.state)),t.setState({email:"",password:""})},t}return Object(i.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("form",{onSubmit:this.logInSubmit,children:[Object(c.jsx)("h1",{children:"Log in to the user"}),Object(c.jsx)("h2",{children:"E-mail"}),Object(c.jsx)("input",{type:"email",value:this.state.email,onChange:this.handelEmailLogIn,placeholder:"to enter e-mail"}),Object(c.jsx)("h2",{children:"Password"}),Object(c.jsx)("input",{type:"password",value:this.state.password,onChange:this.handelpasswordLogIn,placeholder:"to enter password"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{type:"submit",children:"To Enter"})]})}}]),n}(r.Component),E=Object(h.b)(null,{onLogIn:C.logIn})(_),R=function(t){return t.auth.token},w=function(t){return t.auth.user.name},L=n(8),k=n.n(L),F=function(){return Object(c.jsx)("ul",{className:k.a.listNavigation,children:Object(c.jsx)("li",{className:k.a.itemNavigation,children:Object(c.jsx)(j.b,{to:"/contacts",children:"Contacts"})})})},U=Object(h.b)((function(t){return{"is\u0410uthorized":R(t)}}))((function(t){var e=t.is\u0410uthorized;return Object(c.jsxs)("nav",{className:k.a.listNavigation,children:[Object(c.jsx)(j.b,{exact:!0,to:"/",children:"Home"}),e&&Object(c.jsx)(F,{})]})})),A={onLogOut:C.logOut},D=Object(h.b)((function(t){return{name:w(t),avatar:"http://clipart-library.com/2020/il_794xN.1921617602_pb2d.jpg"}}),A)((function(t){var e=t.avatar,n=t.name,r=t.onLogOut;return Object(c.jsxs)("div",{className:k.a.listNavigation,children:[Object(c.jsx)("img",{src:e,alt:"spiderman",width:"52",className:k.a.itemNavigation}),Object(c.jsxs)("span",{className:k.a.itemNavigation,children:["You are on the pages : User ",n]}),Object(c.jsx)("button",{type:"button",onClick:r,className:k.a.itemNavigation,children:"Log Out"})]})})),q=function(){return Object(c.jsxs)("ul",{className:k.a.listNavigation,children:[Object(c.jsx)("li",{className:k.a.itemNavigation,children:Object(c.jsx)(j.b,{to:"/register",children:"Registers"})}),Object(c.jsxs)("li",{className:k.a.itemNavigation,children:[Object(c.jsx)(j.b,{to:"/login",children:"Log in"})," "]})]})},z=Object(h.b)((function(t){return{onLogIn:R(t)}}))((function(t){var e=t.onLogIn;return Object(c.jsxs)("div",{className:k.a.header,children:[Object(c.jsx)(U,{}),e?Object(c.jsx)(D,{}):Object(c.jsx)(q,{})]})})),P=n(3),T=Object(m.b)("contact/addRecuest"),B=Object(m.b)("contact/addSuccess"),M=Object(m.b)("contact/addError"),G=Object(m.b)("contact/fetchRecuest"),W=Object(m.b)("contact/fetchSuccess"),J=Object(m.b)("contact/fetchError"),V=Object(m.b)("contact/deleteContactRecuest"),H=Object(m.b)("contact/deleteContactSuccess"),Q=Object(m.b)("contact/deleteContactError"),Y={filterContact:Object(m.b)("contact/filter"),addContactRecuest:T,addContactSuccess:B,fetchContactSuccess:W,fetchContactRecuest:G,fetchContactError:J,deleteContactRecuest:V,deleteContactSuccess:H,deleteContactError:Q,addContactError:M},K={addContacts:function(t,e){return function(n){n(Y.addContactRecuest()),f.a.post("/contacts",{name:t,number:e}).then((function(t){n(Y.addContactSuccess(t.data))})).catch((function(t){return n(Y.addContactError(t))}))}},fetchContacts:function(){return function(t){t(Y.fetchContactRecuest()),f.a.get("/contacts").then((function(e){t(Y.fetchContactSuccess(e.data))})).catch((function(e){return t(Y.fetchContactError(e))}))}},deleteContacts:function(t){return function(e){e(Y.deleteContactRecuest()),f.a.delete("/contacts/".concat(t)).then((function(){return e(Y.deleteContactSuccess(t))})).catch((function(t){return e(Y.deleteContactError(t))}))}}},X=n(24),Z=n.n(X),$=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={name:"",number:""},t.handelInputChange=function(e){e.preventDefault(),t.setState(Object(P.a)({},e.target.name,e.target.value))},t.handelSubmit=function(e){e.preventDefault(),t.props.onhandleAddContact(t.state.name,t.state.number),t.setState({name:"",number:""})},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=t.number;return Object(c.jsxs)("div",{className:Z.a.formStyle,children:[Object(c.jsx)("h2",{className:Z.a.formStyleTitle,children:"Phonebook"}),Object(c.jsxs)("form",{className:Z.a.formStyleFormInput,onSubmit:this.handelSubmit,children:[Object(c.jsxs)("label",{children:["Name",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"name",value:e,onChange:this.handelInputChange,placeholder:"Add name",autoFocus:!0}),Object(c.jsx)("br",{})]}),Object(c.jsxs)("label",{children:["Number",Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"number",value:n,onChange:this.handelInputChange,placeholder:"Add number",autoFocus:!0})]}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{className:Z.a.formStyleFormButton,type:"submit",children:"Add contact"})]})]})}}]),n}(r.Component),tt=Object(h.b)(null,(function(t){return{onhandleAddContact:function(e,n){return t(K.addContacts(e,n))}}}))($),et=n(27),nt=function(t){return t.allContacts.itemContacts},ct=function(t){return t.allContacts.filter},rt={getitemContacts:nt,getFilter:ct,getLoading:function(t){return t.allContacts.loading},getVisibleContact:Object(et.a)([nt,ct],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}))},at=n(35),ot=n.n(at);n(77);var st={onDeleteContact:K.deleteContacts},ut=Object(h.b)((function(t){return{contact:rt.getVisibleContact(t)}}),st)((function(t){var e=t.contact,n=t.onDeleteContact;return Object(c.jsx)("ul",{children:e.map((function(t){var e=t.id,r=t.name,a=t.number;return Object(c.jsxs)("li",{className:ot.a.ListContactItem,children:[Object(c.jsxs)("span",{children:[r,":"]}),Object(c.jsx)("span",{children:a}),Object(c.jsx)("button",{className:ot.a.buttonDeleteContact,onClick:function(){return n(e)}})]},e)}))})})),it=n(29),lt=n.n(it);var bt,jt,dt,ht,Ot,ft={onChange:Y.filterContact},mt=Object(h.b)((function(t){return{value:rt.getFilter(t)}}),ft)((function(t){var e=t.value,n=t.onChange;return Object(c.jsxs)("form",{className:lt.a.filter,children:[Object(c.jsx)("h2",{className:lt.a.filterTitle,children:"Find contacts by name"}),Object(c.jsx)("input",{className:lt.a.filterInput,type:"text",name:"filter",value:e,onChange:function(t){return n(t.target.value)}})]})})),gt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.isAuthLogIn||this.props.history.replace("/login")}},{key:"componentDidUpdate",value:function(){this.props.isAuthLogIn||this.props.history.replace("/login")}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"App",children:[this.props.isLoadingContacts&&Object(c.jsx)("h1",{children:"LOADING ..."}),Object(c.jsx)(tt,{}),Object(c.jsx)(mt,{}),Object(c.jsx)(ut,{})]})}}]),n}(r.Component),pt={onFetchContact:K.fetchContacts},Ct=Object(h.b)((function(t){return{isLoadingContacts:rt.getLoading(t),isAuthLogIn:R(t)}}),pt)(gt),xt=n(28),vt=Object(h.b)((function(t){return{"is\u0410uthorized":R(t)}}))((function(t){var e=t.component,n=t.is\u0410uthorized,r=Object(xt.a)(t,["component","is\u0410uthorized"]);return Object(c.jsx)(d.b,Object(y.a)(Object(y.a)({},r),{},{render:function(t){return n?Object(c.jsx)(e,Object(y.a)({},t)):Object(c.jsx)(d.a,{to:"/"})}}))})),St=Object(h.b)((function(t){return{"is\u0410uthorized":R(t)}}))((function(t){var e=t.component,n=t.is\u0410uthorized,r=t.restricted,a=Object(xt.a)(t,["component","is\u0410uthorized","restricted"]);return Object(c.jsx)(d.b,Object(y.a)(Object(y.a)({},a),{},{render:function(t){return n&&r?Object(c.jsx)(d.a,{to:"/contacts"}):Object(c.jsx)(e,Object(y.a)({},t))}}))})),yt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(c.jsx)(j.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(z,{}),Object(c.jsx)("hr",{}),Object(c.jsxs)(d.d,{children:[Object(c.jsx)(vt,{path:"/contacts",exact:!0,component:Ct}),Object(c.jsx)(St,{path:"/",restricted:!1,exact:!0,component:S}),Object(c.jsx)(St,{path:"/register",restricted:!0,exact:!0,component:N}),Object(c.jsx)(St,{path:"/login",restricted:!0,exact:!0,component:E})]})]})})}}]),n}(r.Component),It={onGetCurrentUser:C.getCurrentUser},Nt=Object(h.b)(null,It)(yt),_t=n(48),Et=n(21),Rt=n(36),wt=n.n(Rt),Lt=n(49),kt=n(7),Ft=function(t,e){var n=e.payload,c=t.some((function(t){return t.number===n.number}));return!c&&n.name&&n.number?[].concat(Object(Lt.a)(t),[n]):(c&&alert("\u0442\u0430\u043a\u0438\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u0432\u0436\u0435 \u0454"),""!==n.name&&""!==n.number||alert("\u0432\u043d\u0435\u0441\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u0456"),t)},Ut=Object(m.c)([],(bt={},Object(P.a)(bt,Y.fetchContactSuccess,Ft),Object(P.a)(bt,Y.addContactSuccess,Ft),Object(P.a)(bt,Y.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),bt)),At=Object(m.c)(!1,(jt={},Object(P.a)(jt,Y.fetchContactRecuest,(function(){return!0})),Object(P.a)(jt,Y.addContactRecuest,(function(){return!0})),Object(P.a)(jt,Y.deleteContactRecuest,(function(){return!0})),Object(P.a)(jt,Y.fetchContactSuccess,(function(){return!1})),Object(P.a)(jt,Y.addContactSuccess,(function(){return!1})),Object(P.a)(jt,Y.deleteContactSuccess,(function(){return!1})),Object(P.a)(jt,Y.fetchContactError,(function(){return!1})),Object(P.a)(jt,Y.addContactError,(function(){return!1})),Object(P.a)(jt,Y.deleteContactError,(function(){return!1})),jt)),Dt=Object(m.c)("",Object(P.a)({},Y.filterContact,(function(t,e){return e.payload}))),qt=Object(kt.c)({itemContacts:Ut,filter:Dt,loading:At}),zt={name:"",email:""},Pt=Object(m.c)(zt,(dt={},Object(P.a)(dt,g.registerSuccess,(function(t,e){return e.payload.user})),Object(P.a)(dt,g.logInSuccess,(function(t,e){return e.payload.user})),Object(P.a)(dt,g.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(P.a)(dt,g.logOutSuccess,(function(){return zt})),dt)),Tt=Object(m.c)(null,(ht={},Object(P.a)(ht,g.registerSuccess,(function(t,e){return e.payload.token})),Object(P.a)(ht,g.logInSuccess,(function(t,e){return e.payload.token})),Object(P.a)(ht,g.logOutSuccess,(function(){return null})),ht)),Bt=Object(m.c)(null,(Ot={},Object(P.a)(Ot,g.registerError,(function(t,e){return e.payload})),Object(P.a)(Ot,g.logInError,(function(t,e){return e.payload})),Object(P.a)(Ot,g.logOutError,(function(t,e){return e.payload})),Object(P.a)(Ot,g.getCurrentUserError,(function(t,e){return e.payload})),Ot)),Mt=Object(kt.c)({user:Pt,token:Tt,error:Bt}),Gt=m.d,Wt={key:"auth",storage:wt.a,whitelist:["token"]},Jt={key:"allContacts",storage:wt.a,whitelist:["itemContacts"]},Vt=Object(m.a)({reducer:{allContacts:Object(Et.g)(Jt,qt),auth:Object(Et.g)(Wt,Mt)},middleware:Gt({serializableCheck:{ignoredActions:[Et.a,Et.f,Et.b,Et.c,Et.d,Et.e]}})}),Ht=Object(Et.h)(Vt);s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(h.a,{store:Vt,children:Object(c.jsx)(_t.a,{loading:null,persistor:Ht,children:Object(c.jsx)(Nt,{})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.6d78d1a1.chunk.js.map